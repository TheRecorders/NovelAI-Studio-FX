<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>
<?import com.zxzinn.novelai.component.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            xmlns="http://javafx.com/javafx"
            fx:controller="com.zxzinn.novelai.controller.generation.GenerationController"
            stylesheets="@styles.css">
    <left>
        <VBox spacing="10.0" styleClass="settings-panel">
            <ScrollPane fitToWidth="true" styleClass="side-panel" VBox.vgrow="ALWAYS">
                <VBox spacing="10.0">
                    <TitledPane text="API Settings" styleClass="settings-section">
                        <VBox spacing="5.0" styleClass="settings-content">
                            <Label text="API Key" />
                            <TextField fx:id="apiKeyField" styleClass="right-aligned-text" />
                            <Label text="模型" />
                            <ComboBox fx:id="modelComboBox" maxWidth="Infinity" styleClass="right-aligned-text" />
                            <Label text="生成模式" />
                            <ComboBox fx:id="generationModeComboBox" maxWidth="Infinity" styleClass="right-aligned-text" />
                        </VBox>
                    </TitledPane>
                    <TitledPane text="Output Settings" styleClass="settings-section">
                        <VBox spacing="5.0" styleClass="settings-content">
                            <Label text="寬度" />
                            <TextField fx:id="widthField" styleClass="right-aligned-text" />
                            <Label text="高度" />
                            <TextField fx:id="heightField" styleClass="right-aligned-text" />
                            <Label text="比例" />
                            <TextField fx:id="ratioField" styleClass="right-aligned-text" />
                            <Label text="每次生成圖像數" />
                            <TextField fx:id="countField" styleClass="right-aligned-text" />
                            <Label text="輸出目錄" />
                            <TextField fx:id="outputDirectoryField" styleClass="right-aligned-text" />
                        </VBox>
                    </TitledPane>
                    <TitledPane text="Sampling Settings" styleClass="settings-section">
                        <VBox spacing="5.0" styleClass="settings-content">
                            <Label text="採樣器" />
                            <ComboBox fx:id="samplerComboBox" maxWidth="Infinity" styleClass="right-aligned-text" />
                            <Label text="步驟" />
                            <TextField fx:id="stepsField" styleClass="right-aligned-text" />
                            <Label text="種子" />
                            <TextField fx:id="seedField" styleClass="right-aligned-text" />
                        </VBox>
                    </TitledPane>
                    <TitledPane fx:id="txt2imgSettingsPane" text="Text2Image Settings" styleClass="settings-section">
                        <VBox spacing="5.0" styleClass="settings-content">
                            <CheckBox fx:id="smeaCheckBox" text="SMEA" />
                            <CheckBox fx:id="smeaDynCheckBox" text="SMEA DYN" />
                        </VBox>
                    </TitledPane>
                    <TitledPane fx:id="img2imgSettingsPane" text="Image2Image Settings" styleClass="settings-section">
                        <VBox spacing="5.0" styleClass="settings-content">
                            <Label text="Strength" />
                            <HBox spacing="5.0">
                                <Slider fx:id="strengthSlider" min="0" max="1" value="0.5" blockIncrement="0.1" HBox.hgrow="ALWAYS" />
                                <Label fx:id="strengthLabel" text="0.5" />
                            </HBox>
                            <Label text="Extra Noise Seed" />
                            <TextField fx:id="extraNoiseSeedField" styleClass="right-aligned-text" />
                            <Button fx:id="uploadImageButton" text="選擇圖片" onAction="#handleUploadImage" maxWidth="Infinity" styleClass="upload-button"/>
                        </VBox>
                    </TitledPane>
                </VBox>
            </ScrollPane>
            <HBox spacing="10.0" alignment="CENTER" styleClass="control-bar">
                <Button text="生成" fx:id="generateButton" onAction="#handleGenerateOrStop" styleClass="generate-button" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                <ComboBox fx:id="generateCountComboBox" promptText="生成數量" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
            </HBox>
        </VBox>
    </left>
    <center>
        <HBox spacing="10.0">
            <VBox spacing="10.0" HBox.hgrow="ALWAYS" styleClass="main-content">
                <HBox spacing="10.0" VBox.vgrow="NEVER">
                    <PromptArea fx:id="positivePromptArea" HBox.hgrow="ALWAYS"/>
                    <PromptControls fx:id="positivePromptControls"/>
                    <PromptPreviewArea fx:id="positivePromptPreviewArea" HBox.hgrow="ALWAYS"/>
                </HBox>
                <HBox spacing="10.0" VBox.vgrow="NEVER">
                    <PromptArea fx:id="negativePromptArea" HBox.hgrow="ALWAYS"/>
                    <PromptControls fx:id="negativePromptControls"/>
                    <PromptPreviewArea fx:id="negativePromptPreviewArea" HBox.hgrow="ALWAYS"/>
                </HBox>
                <StackPane fx:id="previewContainer" VBox.vgrow="ALWAYS" styleClass="preview-container"/>
                <ImageControlBar fx:id="imageControlBar" />
            </VBox>
            <HistoryImagesPane fx:id="historyImagesPane" prefWidth="100" HBox.hgrow="NEVER"/>
        </HBox>
    </center>
</BorderPane>